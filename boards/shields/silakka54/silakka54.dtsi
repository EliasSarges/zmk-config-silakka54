/*
 * Copyright (c) 2025 Seu Nome
 * SPDX-License-Identifier: MIT
 *
 * Configuração final para Silakka54, baseada na pinagem comprovada do Lily58,
 * traduzida para pinos GPIO diretos do nRF52840 (nice!nano).
 */
#include <dt-bindings/zmk/matrix_transform.h>

/ {
    chosen {
        zmk,kscan = &kscan;
        zmk,matrix_transform = &keymap_transform;
    };

    kscan: kscan {
        compatible = "zmk,kscan-gpio-matrix";
        label = "KSCAN";

        // Pinos do Lily58 traduzidos para o nice!nano
        col-gpios
            = <&gpio0 6 (GPIO_ACTIVE_HIGH)>   // Coluna 0
            , <&gpio0 8 (GPIO_ACTIVE_HIGH)>   // Coluna 1
            , <&gpio0 31 (GPIO_ACTIVE_HIGH)>  // Coluna 2
            , <&gpio0 29 (GPIO_ACTIVE_HIGH)>  // Coluna 3
            , <&gpio0 4 (GPIO_ACTIVE_HIGH)>   // Coluna 4
            , <&gpio0 2 (GPIO_ACTIVE_HIGH)>   // Coluna 5
            ;

        row-gpios
            = <&gpio0 20 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)> // Linha 0 (Fileira de cima)
            , <&gpio0 22 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)> // Linha 1
            , <&gpio0 24 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)> // Linha 2
            , <&gpio1 0 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>  // Linha 3
            , <&gpio0 10 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)> // Linha 4 (Fileira do Polegar
